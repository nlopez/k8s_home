---
apiVersion: v1
kind: ConfigMap
metadata:
  name: yt-dlp
  namespace: media
data:
  config: |-
    --add-header "User-Agent:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36"
    --cache-dir /media/youtube/cache
    --clean-info-json
    --concurrent-fragments 4
    --cookies /media/youtube/cfg/cookies.txt
    --download-archive /media/youtube/cfg/download-archive.txt
    --downloader aria2c
    --downloader-args aria2c:"--min-split-size=1M --max-connection-per-server=16 --max-concurrent-downloads=16 --split=16 --file-allocation=none --continue=true"
    --embed-chapters
    --embed-metadata
    --format "bv+ba/b"
    --live-from-start
    --merge-output-format mkv
    --no-part
    --output "out/%(channel)s_[%(channel_id)s]/%(release_timestamp>%Y%m%dT%H%MZ)s_%(title)s_[%(id)s].%(ext)s"
    --paths "temp:/yt-dlp-temp"
    --paths /media/youtube
    --restrict-filenames
    --wait-for-video 300
    --write-info-json
    --write-thumbnail
